-- Auto-generated SQL Dump from Schema Recovery
-- Date: 2025-12-14 09:18:50.906466
-- Project: abkpbchwimfebfjiujav (Hubspot)

CREATE TABLE IF NOT EXISTS comm.channel_members (
    id uuid,
    channel_id uuid,
    person_id uuid,
    joined_at timestamptz,
    role text,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS comm.channels (
    id uuid,
    org_id uuid,
    name text,
    type channel_type_enum,
    created_at timestamptz,
    created_by uuid
);

CREATE TABLE IF NOT EXISTS comm.files (
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    file_type text,
    file_name text,
    storage_path text,
    content_type text,
    size_bytes int8,
    uploaded_by uuid,
    uploaded_at timestamptz,
    is_deleted bool,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    delete_reason text,
    restore_reason text,
    restored_at timestamptz,
    restored_by uuid,
    deletion_scheduled_at timestamptz,
    permanent_deletion_date date,
    deletion_count int4,
    file_version int4,
    previous_version_id uuid,
    is_archived bool,
    archived_at timestamptz,
    archived_by uuid,
    archive_location text,
    checksum text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid
);

CREATE TABLE IF NOT EXISTS comm.log_history (
    id uuid,
    org_id uuid,
    schema_name text,
    table_name text,
    record_id uuid,
    operation text,
    changed_by text,
    changed_by_id uuid,
    changed_at timestamptz,
    old_data jsonb,
    new_data jsonb,
    comment text,
    metadata jsonb,
    changed_fields _text,
    ip_address inet,
    user_agent text,
    session_id text,
    request_id text
);

CREATE TABLE IF NOT EXISTS comm.messages (
    id uuid,
    channel_id uuid,
    sender_id uuid,
    body text,
    attachments jsonb,
    created_at timestamptz,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS comm.module_role_assignments (
    id uuid,
    org_id uuid,
    role_id uuid,
    person_id uuid,
    team_id uuid,
    scope jsonb,
    active bool,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS comm.module_team_members (
    id uuid,
    org_id uuid,
    team_id uuid,
    person_id uuid,
    role_code text,
    is_primary bool,
    joined_at timestamptz,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS comm.notifications (
    id uuid,
    person_id uuid,
    reference_table text,
    reference_id uuid,
    type text,
    payload jsonb,
    delivered bool,
    read_at timestamptz,
    created_at timestamptz,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS committee.committee_meeting_records (
    id uuid,
    meeting_id uuid,
    agenda_item text,
    discussion text,
    decision text,
    action_items jsonb,
    responsible_person_id uuid,
    due_date date,
    status text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid
);

CREATE TABLE IF NOT EXISTS committee.committee_meetings (
    id uuid,
    committee_id uuid,
    meeting_number text,
    meeting_date date,
    meeting_time time,
    location text,
    agenda text,
    status meeting_status,
    attendees jsonb,
    minutes_file_id uuid,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS committee.committee_members (
    id uuid,
    committee_id uuid,
    person_id uuid,
    member_role member_role,
    appointment_date date,
    term_end_date date,
    is_active bool,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS committee.committees (
    id uuid,
    org_id uuid,
    committee_name text,
    committee_type text,
    formation_date date,
    validity_period text,
    dissolution_date date,
    committee_objective text,
    committee_status text,
    charter_file_id uuid,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS committee.files (
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    file_type text,
    file_name text,
    storage_path text,
    content_type text,
    size_bytes int8,
    uploaded_by uuid,
    uploaded_at timestamptz,
    is_deleted bool,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    delete_reason text,
    restore_reason text,
    restored_at timestamptz,
    restored_by uuid,
    deletion_scheduled_at timestamptz,
    permanent_deletion_date date,
    deletion_count int4,
    file_version int4,
    previous_version_id uuid,
    is_archived bool,
    archived_at timestamptz,
    archived_by uuid,
    archive_location text,
    checksum text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid
);

CREATE TABLE IF NOT EXISTS committee.log_history (
    id uuid,
    org_id uuid,
    schema_name text,
    table_name text,
    record_id uuid,
    operation text,
    changed_by text,
    changed_by_id uuid,
    changed_at timestamptz,
    old_data jsonb,
    new_data jsonb,
    comment text,
    metadata jsonb,
    changed_fields _text,
    ip_address inet,
    user_agent text,
    session_id text,
    request_id text
);

CREATE TABLE IF NOT EXISTS contracforce.contract_payments (
    id uuid,
    org_id uuid,
    contract_id uuid,
    payment_number text,
    invoice_number text,
    invoice_date date,
    payment_period_start date,
    payment_period_end date,
    gross_amount numeric,
    deductions jsonb,
    net_amount numeric,
    gst_amount numeric,
    tds_amount numeric,
    total_payable numeric,
    payment_date date,
    payment_reference text,
    status text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS contracforce.contractor_compliance_documents (
    id uuid,
    org_id uuid,
    contractor_id uuid,
    document_type text,
    document_number text,
    issue_date date,
    expiry_date date,
    document_file_id uuid,
    verified bool,
    verified_by uuid,
    verified_date date,
    status text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS contracforce.contractor_staff (
    id uuid,
    org_id uuid,
    contractor_id uuid,
    staff_code text,
    full_name text,
    father_name text,
    date_of_birth date,
    gender text,
    mobile text,
    address text,
    staff_type staff_type,
    joining_date date,
    leaving_date date,
    aadhaar_number_masked text,
    bank_account_number_masked text,
    ifsc_code text,
    uan_number text,
    esi_number text,
    wage_per_day numeric,
    status text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS contracforce.contractor_staff_documents (
    id uuid,
    org_id uuid,
    contractor_staff_id uuid,
    document_type text,
    document_file_id uuid,
    verified bool,
    verified_by uuid,
    verified_date date,
    expiry_date date,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid
);

CREATE TABLE IF NOT EXISTS contracforce.contractors (
    id uuid,
    org_id uuid,
    entity_id uuid,
    contractor_code text,
    contractor_name text,
    contractor_type text,
    contact_person text,
    contact_number text,
    email text,
    address text,
    city text,
    state text,
    pincode text,
    gst_number text,
    pan_number text,
    bank_name text,
    bank_account_number_masked text,
    ifsc_code text,
    license_number text,
    license_expiry_date date,
    status contractor_status,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS contracforce.contracts (
    id uuid,
    org_id uuid,
    contractor_id uuid,
    contract_number text,
    contract_type text,
    start_date date,
    end_date date,
    scope_of_work text,
    contract_value numeric,
    payment_terms text,
    auto_renew bool,
    contract_file_id uuid,
    status text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS contracforce.files (
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    file_type text,
    file_name text,
    storage_path text,
    content_type text,
    size_bytes int8,
    uploaded_by uuid,
    uploaded_at timestamptz,
    is_deleted bool,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    delete_reason text,
    restore_reason text,
    restored_at timestamptz,
    restored_by uuid,
    deletion_scheduled_at timestamptz,
    permanent_deletion_date date,
    deletion_count int4,
    file_version int4,
    previous_version_id uuid,
    is_archived bool,
    archived_at timestamptz,
    archived_by uuid,
    archive_location text,
    checksum text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid
);

CREATE TABLE IF NOT EXISTS contracforce.log_history (
    id uuid,
    org_id uuid,
    schema_name text,
    table_name text,
    record_id uuid,
    operation text,
    changed_by text,
    changed_by_id uuid,
    changed_at timestamptz,
    old_data jsonb,
    new_data jsonb,
    comment text,
    metadata jsonb,
    changed_fields _text,
    ip_address inet,
    user_agent text,
    session_id text,
    request_id text
);

CREATE TABLE IF NOT EXISTS finac.bank_accounts (
    id uuid,
    org_id uuid,
    party_type text,
    party_id uuid,
    account_holder_name text,
    bank_name text,
    branch_name text,
    account_number_masked text,
    account_number_encrypted text,
    ifsc_code text,
    swift_code text,
    account_type account_type,
    currency text,
    opening_balance numeric,
    current_balance numeric,
    is_default bool,
    verified bool,
    kyc_documents jsonb,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS finac.bank_transactions (
    id uuid,
    org_id uuid,
    transaction_number text,
    bank_account_id uuid,
    txn_date timestamptz,
    amount numeric,
    currency text,
    currency_rate numeric,
    direction transaction_direction,
    transaction_purpose transaction_purpose,
    party_type text,
    party_id uuid,
    reference_table text,
    reference_id uuid,
    bank_reference text,
    cheque_number text,
    utr_number text,
    status text,
    cleared_at timestamptz,
    reconciliation_status text,
    reconciled_at timestamptz,
    reconciled_by uuid,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS finac.expense_categories (
    id uuid,
    code text,
    name text,
    parent_category_id uuid,
    description text,
    is_active bool,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS finac.expense_claim_details (
    id uuid,
    claim_id uuid,
    line_number int4,
    expense_date date,
    category text,
    sub_category text,
    description text,
    supplier_name text,
    supplier_gstin text,
    supplier_pan text,
    invoice_number text,
    invoice_date date,
    taxable_amount numeric,
    gst_rate_percent numeric,
    gst_type gst_type,
    cgst_amount numeric,
    sgst_amount numeric,
    igst_amount numeric,
    cess_amount numeric,
    total_line_amount numeric,
    tds_applicable bool,
    tds_section tds_section,
    tds_rate_percent numeric,
    tds_amount numeric,
    reimbursable bool,
    cost_center text,
    project_code text,
    hsn_sac_id uuid,
    attachments jsonb,
    compliance_flags jsonb,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS finac.expense_claim_summary (
    id uuid,
    org_id uuid,
    claim_number text,
    claimant_id uuid,
    entity_id uuid,
    claim_date date,
    total_taxable_amount numeric,
    total_gst_amount numeric,
    total_tds_amount numeric,
    total_amount numeric,
    net_payable_amount numeric,
    reimbursement_type text,
    payment_account_id uuid,
    status text,
    submitted_at timestamptz,
    approved_at timestamptz,
    approved_by uuid,
    paid_at timestamptz,
    payment_reference text,
    policy_violations jsonb,
    notes text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS finac.files (
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    file_type text,
    file_name text,
    storage_path text,
    content_type text,
    size_bytes int8,
    uploaded_by uuid,
    uploaded_at timestamptz,
    is_deleted bool,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    delete_reason text,
    restore_reason text,
    restored_at timestamptz,
    restored_by uuid,
    deletion_scheduled_at timestamptz,
    permanent_deletion_date date,
    deletion_count int4,
    file_version int4,
    previous_version_id uuid,
    is_archived bool,
    archived_at timestamptz,
    archived_by uuid,
    archive_location text,
    checksum text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid
);

CREATE TABLE IF NOT EXISTS finac.journal_entries (
    id uuid,
    org_id uuid,
    journal_number text,
    journal_date date,
    entry_type journal_entry_type,
    reference_table text,
    reference_id uuid,
    description text,
    total_debit numeric,
    total_credit numeric,
    status text,
    posted_at timestamptz,
    posted_by uuid,
    reversed bool,
    reversed_by_id uuid,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS finac.journal_entry_lines (
    id uuid,
    journal_entry_id uuid,
    line_number int4,
    account_code text,
    account_name text,
    debit_amount numeric,
    credit_amount numeric,
    description text,
    cost_center text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid
);

CREATE TABLE IF NOT EXISTS finac.log_history (
    id uuid,
    org_id uuid,
    schema_name text,
    table_name text,
    record_id uuid,
    operation text,
    changed_by text,
    changed_by_id uuid,
    changed_at timestamptz,
    old_data jsonb,
    new_data jsonb,
    comment text,
    metadata jsonb,
    changed_fields _text,
    ip_address inet,
    user_agent text,
    session_id text,
    request_id text
);

CREATE TABLE IF NOT EXISTS finac.module_role_assignments (
    id uuid,
    role_id uuid,
    person_id uuid,
    team_id uuid,
    scope jsonb,
    active bool,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS finac.module_roles (
    id uuid,
    org_id uuid,
    role_code text,
    display_name text,
    description text,
    permissions jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS finac.module_team_members (
    id uuid,
    team_id uuid,
    person_id uuid,
    role_code text,
    is_primary bool,
    joined_at timestamptz,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS finac.module_teams (
    id uuid,
    org_id uuid,
    name text,
    parent_team_id uuid,
    lead_person_id uuid,
    description text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS finac.module_users (
    id uuid,
    org_id uuid,
    person_id uuid,
    module_role text,
    designation text,
    permissions jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS knowledge.doc_access_control (
    id uuid,
    doc_id uuid,
    role_code text,
    person_id uuid,
    permission text,
    created_at timestamptz,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS knowledge.doc_feedback (
    id uuid,
    doc_id uuid,
    person_id uuid,
    rating int4,
    comments text,
    created_at timestamptz,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS knowledge.doc_tag_map (
    id uuid,
    doc_id uuid,
    tag_id uuid,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS knowledge.doc_tags (
    id uuid,
    name text,
    metadata jsonb,
    created_at timestamptz,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS knowledge.doc_versions (
    id uuid,
    doc_id uuid,
    version_no int4,
    content jsonb,
    changed_by uuid,
    changed_at timestamptz,
    notes text,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS knowledge.docs (
    id uuid,
    org_id uuid,
    title text,
    slug text,
    content jsonb,
    doc_type doc_type_enum,
    status doc_status_enum,
    tags _text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid
);

CREATE TABLE IF NOT EXISTS knowledge.files (
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    file_type text,
    file_name text,
    storage_path text,
    content_type text,
    size_bytes int8,
    uploaded_by uuid,
    uploaded_at timestamptz,
    is_deleted bool,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    delete_reason text,
    restore_reason text,
    restored_at timestamptz,
    restored_by uuid,
    deletion_scheduled_at timestamptz,
    permanent_deletion_date date,
    deletion_count int4,
    file_version int4,
    previous_version_id uuid,
    is_archived bool,
    archived_at timestamptz,
    archived_by uuid,
    archive_location text,
    checksum text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid
);

CREATE TABLE IF NOT EXISTS knowledge.log_history (
    id uuid,
    org_id uuid,
    schema_name text,
    table_name text,
    record_id uuid,
    operation text,
    changed_by text,
    changed_by_id uuid,
    changed_at timestamptz,
    old_data jsonb,
    new_data jsonb,
    comment text,
    metadata jsonb,
    changed_fields _text,
    ip_address inet,
    user_agent text,
    session_id text,
    request_id text
);

CREATE TABLE IF NOT EXISTS knowledge.module_role_assignments (
    id uuid,
    org_id uuid,
    role_id uuid,
    person_id uuid,
    team_id uuid,
    scope jsonb,
    active bool,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS knowledge.module_team_members (
    id uuid,
    org_id uuid,
    team_id uuid,
    person_id uuid,
    role_code text,
    is_primary bool,
    joined_at timestamptz,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS ledgie.active_customers (
    id uuid,
    entity_code text,
    name text,
    type entity_type,
    entity_status text,
    country text,
    state text,
    pan text,
    website text,
    assigned_to uuid,
    assigned_to_name text,
    converted_date date,
    created_at timestamptz,
    org_id uuid
);

CREATE TABLE IF NOT EXISTS ledgie.active_prospects (
    id uuid,
    entity_code text,
    company_name text,
    entity_status text,
    lead_temperature text,
    lead_priority text,
    lead_source text,
    estimated_value numeric,
    next_follow_up_date date,
    last_contact_date date,
    interaction_count int4,
    assigned_to uuid,
    assigned_to_name text,
    created_at timestamptz,
    org_id uuid
);

CREATE TABLE IF NOT EXISTS ledgie.agreements (
    id uuid,
    org_id uuid,
    entity_id uuid,
    agreement_type text,
    agreement_number text,
    start_date date,
    end_date date,
    value numeric,
    currency text,
    terms jsonb,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS ledgie.entities (
    id uuid,
    org_id uuid,
    entity_code text,
    name text,
    type entity_type,
    primary_contact_id uuid,
    country text,
    state text,
    district text,
    pincode text,
    gst_default_id uuid,
    pan text,
    website text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool,
    entity_status text,
    lead_source text,
    lead_temperature text,
    lead_priority text,
    assigned_to uuid,
    first_contact_date date,
    last_contact_date date,
    next_follow_up_date date,
    estimated_value numeric,
    expected_close_date date,
    converted_date date,
    interaction_count int4,
    notes text
);

CREATE TABLE IF NOT EXISTS ledgie.entity_contacts (
    id uuid,
    entity_id uuid,
    contact_id uuid,
    role text,
    is_primary bool,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS ledgie.entity_files (
    id uuid,
    entity_id uuid,
    file_id uuid,
    file_type text,
    file_status text,
    uploaded_at timestamptz,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS ledgie.estimates (
    id uuid,
    org_id uuid,
    proposal_id uuid,
    estimate_number text,
    estimate_date date,
    entity_id uuid,
    entity_code text,
    entity_name text,
    entity_contact_name text,
    country text,
    state text,
    district text,
    sub_district text,
    address text,
    pincode text,
    gstin text,
    pan text,
    start_date date,
    end_date date,
    sector text,
    hsn_sac_codes jsonb,
    service_type text,
    quote_validity_days int4,
    service_description text,
    number_of_units int4,
    currency text,
    estimated_costs numeric,
    payment_retainer_pct numeric,
    retainer_value numeric,
    balance_pct numeric,
    balance_value numeric,
    status text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool,
    leads_prospect_id uuid
);

CREATE TABLE IF NOT EXISTS ledgie.files (
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    file_type text,
    file_name text,
    storage_path text,
    content_type text,
    size_bytes int8,
    uploaded_by uuid,
    uploaded_at timestamptz,
    is_deleted bool,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    delete_reason text,
    restore_reason text,
    restored_at timestamptz,
    restored_by uuid,
    deletion_scheduled_at timestamptz,
    permanent_deletion_date date,
    deletion_count int4,
    file_version int4,
    previous_version_id uuid,
    is_archived bool,
    archived_at timestamptz,
    archived_by uuid,
    archive_location text,
    checksum text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid
);

CREATE TABLE IF NOT EXISTS ledgie.hot_prospects (
    id uuid,
    company_name text,
    entity_status text,
    lead_priority text,
    estimated_value numeric,
    next_follow_up_date date,
    last_contact_date date,
    assigned_to uuid,
    assigned_to_name text,
    urgency text,
    org_id uuid
);

CREATE TABLE IF NOT EXISTS ledgie.log_history (
    id uuid,
    org_id uuid,
    schema_name text,
    table_name text,
    record_id uuid,
    operation text,
    changed_by text,
    changed_by_id uuid,
    changed_at timestamptz,
    old_data jsonb,
    new_data jsonb,
    comment text,
    metadata jsonb,
    changed_fields _text,
    ip_address inet,
    user_agent text,
    session_id text,
    request_id text
);

CREATE TABLE IF NOT EXISTS ledgie.module_role_assignments (
    id uuid,
    role_id uuid,
    person_id uuid,
    team_id uuid,
    scope jsonb,
    active bool,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS ledgie.module_roles (
    id uuid,
    org_id uuid,
    role_code text,
    display_name text,
    description text,
    permissions jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS ledgie.module_team_members (
    id uuid,
    team_id uuid,
    person_id uuid,
    role_code text,
    is_primary bool,
    joined_at timestamptz,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS ledgie.module_teams (
    id uuid,
    org_id uuid,
    name text,
    parent_team_id uuid,
    lead_person_id uuid,
    description text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS ledgie.module_users (
    id uuid,
    org_id uuid,
    person_id uuid,
    module_role text,
    designation text,
    permissions jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS ledgie.proforma_invoices (
    id uuid,
    org_id uuid,
    entity_type text,
    proforma_type bill_type,
    service_order_id uuid,
    proposal_id uuid,
    estimate_id uuid,
    proforma_number text,
    invoice_to_name text,
    entity_id uuid,
    entity_code text,
    contact_name text,
    country text,
    state text,
    district text,
    sub_district text,
    address text,
    pincode text,
    gstin text,
    pan text,
    payment_type text,
    payment_term_days int4,
    invoice_date date,
    due_date date,
    currency text,
    agreed_value numeric,
    invoice_value numeric,
    tds_percent numeric,
    tds_value numeric,
    cgst_percent numeric,
    sgst_percent numeric,
    igst_percent numeric,
    cgst_value numeric,
    sgst_value numeric,
    igst_value numeric,
    total_value numeric,
    status text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS ledgie.proposals (
    id uuid,
    org_id uuid,
    entity_id uuid,
    proposal_code text,
    title text,
    sector text,
    proposal_scope text,
    status proposal_status,
    submitted_date date,
    valid_until date,
    remarks text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool,
    leads_prospect_id uuid
);

CREATE TABLE IF NOT EXISTS ledgie.tax_invoices (
    id uuid,
    org_id uuid,
    proforma_invoice_id uuid,
    invoice_number text,
    invoice_date date,
    currency text,
    invoice_value numeric,
    tax_breakup jsonb,
    total_value numeric,
    amount_paid numeric,
    balance_due numeric,
    remarks text,
    status text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS nexus.activity_log (
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    action text,
    performed_by uuid,
    performed_at timestamptz,
    details jsonb
);

CREATE TABLE IF NOT EXISTS nexus.addresses (
    id uuid,
    org_id uuid,
    owner_table text,
    owner_id uuid,
    address_type text,
    line1 text,
    line2 text,
    city text,
    district text,
    state text,
    country text,
    pincode text,
    is_default bool,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS nexus.comments_tracker (
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    commenter_id uuid,
    comment_text text,
    parent_comment_id uuid,
    created_at timestamptz,
    updated_at timestamptz,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS nexus.contacts (
    id uuid,
    org_id uuid,
    person_id uuid,
    contact_type contact_type,
    name text,
    designation text,
    phone text,
    email text,
    location_gps text,
    availability jsonb,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS nexus.files (
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    file_type text,
    file_name text,
    storage_path text,
    content_type text,
    size_bytes int8,
    uploaded_by uuid,
    uploaded_at timestamptz,
    is_deleted bool,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    delete_reason text,
    restore_reason text,
    restored_at timestamptz,
    restored_by uuid,
    deletion_scheduled_at timestamptz,
    permanent_deletion_date date,
    deletion_count int4,
    file_version int4,
    previous_version_id uuid,
    is_archived bool,
    archived_at timestamptz,
    archived_by uuid,
    archive_location text,
    checksum text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid
);

CREATE TABLE IF NOT EXISTS nexus.log_history (
    id uuid,
    org_id uuid,
    schema_name text,
    table_name text,
    record_id uuid,
    operation text,
    changed_by text,
    changed_by_id uuid,
    changed_at timestamptz,
    old_data jsonb,
    new_data jsonb,
    comment text,
    metadata jsonb,
    changed_fields _text,
    ip_address inet,
    user_agent text,
    session_id text,
    request_id text
);

CREATE TABLE IF NOT EXISTS nexus.lookup_groups (
    id uuid,
    code text,
    display_name text,
    description text,
    metadata jsonb,
    created_at timestamptz,
    is_active bool
);

CREATE TABLE IF NOT EXISTS nexus.lookup_values (
    id uuid,
    group_id uuid,
    key text,
    value text,
    sort_order int4,
    is_active bool,
    metadata jsonb,
    created_at timestamptz
);

CREATE TABLE IF NOT EXISTS nexus.module_role_assignments (
    id uuid,
    role_id uuid,
    person_id uuid,
    team_id uuid,
    scope jsonb,
    active bool,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS nexus.module_roles (
    id uuid,
    org_id uuid,
    role_code text,
    display_name text,
    description text,
    permissions jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS nexus.module_team_members (
    id uuid,
    team_id uuid,
    person_id uuid,
    role_code text,
    is_primary bool,
    joined_at timestamptz,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS nexus.module_teams (
    id uuid,
    org_id uuid,
    name text,
    parent_team_id uuid,
    lead_person_id uuid,
    description text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS nexus.module_users (
    id uuid,
    org_id uuid,
    person_id uuid,
    username text,
    display_name text,
    roles _text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS nexus.persons (
    id uuid,
    org_id uuid,
    first_name text,
    last_name text,
    display_name text,
    email text,
    phone text,
    auth_user_id uuid,
    is_org_admin bool,
    roles _text,
    profile_photo_id uuid,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool,
    mobile text,
    otp_method text,
    is_active bool,
    is_verified bool,
    is_superadmin bool,
    last_login_at timestamptz
);

CREATE TABLE IF NOT EXISTS performance.calibrations (
    id uuid,
    review_cycle text,
    notes text,
    status text,
    created_at timestamptz,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS performance.feedbacks (
    id uuid,
    from_person uuid,
    to_person uuid,
    comments text,
    tags _text,
    created_at timestamptz,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS performance.files (
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    file_type text,
    file_name text,
    storage_path text,
    content_type text,
    size_bytes int8,
    uploaded_by uuid,
    uploaded_at timestamptz,
    is_deleted bool,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    delete_reason text,
    restore_reason text,
    restored_at timestamptz,
    restored_by uuid,
    deletion_scheduled_at timestamptz,
    permanent_deletion_date date,
    deletion_count int4,
    file_version int4,
    previous_version_id uuid,
    is_archived bool,
    archived_at timestamptz,
    archived_by uuid,
    archive_location text,
    checksum text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid
);

CREATE TABLE IF NOT EXISTS performance.key_results (
    id uuid,
    objective_id uuid,
    metric text,
    target_value numeric,
    current_value numeric,
    created_at timestamptz,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS performance.log_history (
    id uuid,
    org_id uuid,
    schema_name text,
    table_name text,
    record_id uuid,
    operation text,
    changed_by text,
    changed_by_id uuid,
    changed_at timestamptz,
    old_data jsonb,
    new_data jsonb,
    comment text,
    metadata jsonb,
    changed_fields _text,
    ip_address inet,
    user_agent text,
    session_id text,
    request_id text
);

CREATE TABLE IF NOT EXISTS performance.module_role_assignments (
    id uuid,
    org_id uuid,
    role_id uuid,
    person_id uuid,
    team_id uuid,
    scope jsonb,
    active bool,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS performance.module_team_members (
    id uuid,
    org_id uuid,
    team_id uuid,
    person_id uuid,
    role_code text,
    is_primary bool,
    joined_at timestamptz,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS performance.objectives (
    id uuid,
    org_id uuid,
    owner_person_id uuid,
    title text,
    description text,
    start_date date,
    end_date date,
    weight numeric,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid
);

CREATE TABLE IF NOT EXISTS performance.review_lines (
    id uuid,
    review_id uuid,
    competency text,
    rating review_rating_enum,
    comments text,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS performance.reviews (
    id uuid,
    employee_id uuid,
    reviewer_id uuid,
    period_start date,
    period_end date,
    overall_rating review_rating_enum,
    comments text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid
);

CREATE TABLE IF NOT EXISTS public.approval_actions (
    id uuid,
    request_id uuid,
    level_id uuid,
    level_number int4,
    action text,
    comments text,
    acted_by uuid,
    acted_at timestamptz,
    metadata jsonb
);

CREATE TABLE IF NOT EXISTS public.approval_levels (
    id uuid,
    workflow_id uuid,
    level_number int4,
    name text,
    approver_role text,
    approver_user_id uuid,
    approval_type text,
    is_optional bool,
    auto_approve_conditions jsonb,
    created_at timestamptz
);

CREATE TABLE IF NOT EXISTS public.approval_requests (
    id uuid,
    org_id uuid,
    workflow_id uuid,
    entity_type text,
    entity_id uuid,
    schema_name text,
    current_level int4,
    status text,
    requested_by uuid,
    requested_at timestamptz,
    completed_at timestamptz,
    metadata jsonb,
    created_at timestamptz
);

CREATE TABLE IF NOT EXISTS public.approval_workflows (
    id uuid,
    code text,
    name text,
    description text,
    module_code text,
    entity_type text,
    is_active bool,
    config jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid
);

CREATE TABLE IF NOT EXISTS public.file_deletion_log (
    id uuid,
    file_id uuid,
    org_id uuid,
    schema_name text,
    file_name text,
    storage_path text,
    bucket_name text,
    operation text,
    performed_by uuid,
    performed_at timestamptz,
    reason text,
    metadata jsonb,
    ip_address inet,
    user_agent text,
    reference_table text,
    reference_id uuid,
    file_size_bytes int8,
    created_at timestamptz
);

CREATE TABLE IF NOT EXISTS public.module_bucket_config (
    id uuid,
    module_code text,
    bucket_name text,
    max_storage_gb int4,
    max_file_size_mb int4,
    allowed_file_types _text,
    auto_cleanup_enabled bool,
    auto_cleanup_days int4,
    versioning_enabled bool,
    encryption_enabled bool,
    is_active bool,
    created_at timestamptz,
    updated_at timestamptz,
    metadata jsonb
);

CREATE TABLE IF NOT EXISTS public.sequences (
    id uuid,
    org_id uuid,
    code text,
    prefix text,
    suffix text,
    current_number int4,
    padding int4,
    reset_frequency text,
    last_reset_at date,
    metadata jsonb,
    created_at timestamptz
);

CREATE TABLE IF NOT EXISTS public.v_active_files (
    schema_name text,
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    file_type text,
    file_name text,
    storage_path text,
    content_type text,
    size_bytes int8,
    uploaded_by uuid,
    uploaded_at timestamptz,
    is_deleted bool,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    delete_reason text,
    restore_reason text,
    restored_at timestamptz,
    restored_by uuid,
    deletion_scheduled_at timestamptz,
    permanent_deletion_date date,
    deletion_count int4,
    file_version int4,
    previous_version_id uuid,
    is_archived bool,
    archived_at timestamptz,
    archived_by uuid,
    archive_location text,
    checksum text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid
);

CREATE TABLE IF NOT EXISTS public.v_deleted_files (
    schema_name text,
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    file_type text,
    file_name text,
    storage_path text,
    content_type text,
    size_bytes int8,
    uploaded_by uuid,
    uploaded_at timestamptz,
    is_deleted bool,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    delete_reason text,
    restore_reason text,
    restored_at timestamptz,
    restored_by uuid,
    deletion_scheduled_at timestamptz,
    permanent_deletion_date date,
    deletion_count int4,
    file_version int4,
    previous_version_id uuid,
    is_archived bool,
    archived_at timestamptz,
    archived_by uuid,
    archive_location text,
    checksum text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid
);

CREATE TABLE IF NOT EXISTS public.v_org_files (
    schema_name text,
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    file_type text,
    file_name text,
    storage_path text,
    content_type text,
    size_bytes int8,
    uploaded_by uuid,
    uploaded_at timestamptz,
    is_deleted bool,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    delete_reason text,
    restore_reason text,
    restored_at timestamptz,
    restored_by uuid,
    deletion_scheduled_at timestamptz,
    permanent_deletion_date date,
    deletion_count int4,
    file_version int4,
    previous_version_id uuid,
    is_archived bool,
    archived_at timestamptz,
    archived_by uuid,
    archive_location text,
    checksum text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid
);

CREATE TABLE IF NOT EXISTS public.v_recent_audit_log (
    id uuid,
    org_id uuid,
    schema_name text,
    table_name text,
    record_id uuid,
    operation text,
    changed_by text,
    changed_by_id uuid,
    changed_at timestamptz,
    old_data jsonb,
    new_data jsonb,
    comment text,
    metadata jsonb,
    changed_fields _text,
    ip_address inet,
    user_agent text,
    session_id text,
    request_id text
);

CREATE TABLE IF NOT EXISTS public.v_storage_by_module (
    module_name text,
    bucket_name text,
    org_id uuid,
    active_files int8,
    deleted_files int8,
    active_gb numeric,
    deleted_gb numeric
);

CREATE TABLE IF NOT EXISTS public.v_storage_summary_by_org (
    org_id uuid,
    total_active_files int8,
    total_deleted_files int8,
    total_active_gb numeric,
    total_deleted_gb numeric,
    total_storage_gb numeric
);

CREATE TABLE IF NOT EXISTS pulse.audit_log (
    id uuid,
    org_id uuid,
    table_name text,
    record_id uuid,
    action text,
    changed_by uuid,
    change_ts timestamptz,
    old_data jsonb,
    new_data jsonb,
    ip_address inet,
    user_agent text,
    metadata jsonb
);

CREATE TABLE IF NOT EXISTS pulse.files (
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    file_type text,
    file_name text,
    storage_path text,
    content_type text,
    size_bytes int8,
    uploaded_by uuid,
    uploaded_at timestamptz,
    is_deleted bool,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    delete_reason text,
    restore_reason text,
    restored_at timestamptz,
    restored_by uuid,
    deletion_scheduled_at timestamptz,
    permanent_deletion_date date,
    deletion_count int4,
    file_version int4,
    previous_version_id uuid,
    is_archived bool,
    archived_at timestamptz,
    archived_by uuid,
    archive_location text,
    checksum text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid
);

CREATE TABLE IF NOT EXISTS pulse.log_history (
    id uuid,
    org_id uuid,
    schema_name text,
    table_name text,
    record_id uuid,
    operation text,
    changed_by text,
    changed_by_id uuid,
    changed_at timestamptz,
    old_data jsonb,
    new_data jsonb,
    comment text,
    metadata jsonb,
    changed_fields _text,
    ip_address inet,
    user_agent text,
    session_id text,
    request_id text
);

CREATE TABLE IF NOT EXISTS pulse.module_map (
    module_code text,
    module_display_name text,
    module_description text,
    parent_module text,
    module_schema_name text,
    is_parent_module bool,
    sort_order int4,
    icon_name text,
    color_code text,
    is_active bool,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS pulse.module_role_assignments (
    id uuid,
    role_id uuid,
    person_id uuid,
    team_id uuid,
    scope jsonb,
    active bool,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS pulse.module_roles (
    id uuid,
    org_id uuid,
    role_code text,
    display_name text,
    description text,
    permissions jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS pulse.module_table_map (
    module_table_id uuid,
    module_code text,
    associated_module_table_name text,
    is_table_active bool,
    approval_required bool,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS pulse.module_team_members (
    id uuid,
    team_id uuid,
    person_id uuid,
    role_code text,
    is_primary bool,
    joined_at timestamptz,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS pulse.module_teams (
    id uuid,
    org_id uuid,
    name text,
    parent_team_id uuid,
    lead_person_id uuid,
    description text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS pulse.module_users (
    id uuid,
    org_id uuid,
    hub_user_id uuid,
    username text,
    display_name text,
    roles _text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS pulse.organizations (
    id uuid,
    name text,
    code text,
    domain text,
    plan_id uuid,
    status subscription_status,
    user_capacity int4,
    active_user_count int4,
    billing_contact_id uuid,
    subscription_start_date date,
    subscription_end_date date,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS pulse.organizations_backup_20241213 (
    id uuid,
    name text,
    code text,
    domain text,
    plan_id uuid,
    status subscription_status,
    user_capacity int4,
    active_user_count int4,
    billing_contact_id uuid,
    subscription_start_date date,
    subscription_end_date date,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS pulse.plans (
    id uuid,
    plan_code text,
    display_name text,
    description text,
    price numeric,
    billing_cycle text,
    seats_limit int4,
    storage_limit_gb int4,
    features jsonb,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS recruit.applications (
    id uuid,
    job_id uuid,
    candidate_person_id uuid,
    resume_file_id uuid,
    status application_status_enum,
    applied_at timestamptz,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS recruit.candidate_evals (
    id uuid,
    application_id uuid,
    evaluator_id uuid,
    scores jsonb,
    notes text,
    created_at timestamptz,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS recruit.files (
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    file_type text,
    file_name text,
    storage_path text,
    content_type text,
    size_bytes int8,
    uploaded_by uuid,
    uploaded_at timestamptz,
    is_deleted bool,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    delete_reason text,
    restore_reason text,
    restored_at timestamptz,
    restored_by uuid,
    deletion_scheduled_at timestamptz,
    permanent_deletion_date date,
    deletion_count int4,
    file_version int4,
    previous_version_id uuid,
    is_archived bool,
    archived_at timestamptz,
    archived_by uuid,
    archive_location text,
    checksum text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid
);

CREATE TABLE IF NOT EXISTS recruit.interviews (
    id uuid,
    application_id uuid,
    interviewer_id uuid,
    interview_date timestamptz,
    mode text,
    score numeric,
    notes text,
    file_id uuid,
    created_at timestamptz,
    created_by uuid,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS recruit.job_stages (
    id uuid,
    name text,
    sort_order int4,
    is_final bool,
    created_at timestamptz,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS recruit.jobs (
    id uuid,
    org_id uuid,
    job_code text,
    title text,
    dept text,
    hiring_manager_id uuid,
    location text,
    status job_status_enum,
    description text,
    created_at timestamptz,
    created_by uuid
);

CREATE TABLE IF NOT EXISTS recruit.log_history (
    id uuid,
    org_id uuid,
    schema_name text,
    table_name text,
    record_id uuid,
    operation text,
    changed_by text,
    changed_by_id uuid,
    changed_at timestamptz,
    old_data jsonb,
    new_data jsonb,
    comment text,
    metadata jsonb,
    changed_fields _text,
    ip_address inet,
    user_agent text,
    session_id text,
    request_id text
);

CREATE TABLE IF NOT EXISTS recruit.module_role_assignments (
    id uuid,
    org_id uuid,
    role_id uuid,
    person_id uuid,
    team_id uuid,
    scope jsonb,
    active bool,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS recruit.module_team_members (
    id uuid,
    org_id uuid,
    team_id uuid,
    person_id uuid,
    role_code text,
    is_primary bool,
    joined_at timestamptz,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS recruit.offers (
    id uuid,
    application_id uuid,
    offer_no text,
    salary numeric,
    start_date date,
    status text,
    offer_file_id uuid,
    created_at timestamptz,
    created_by uuid,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS recruit.sourcing_channels (
    id uuid,
    code text,
    display_name text,
    created_at timestamptz,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS shield.files (
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    file_type text,
    file_name text,
    storage_path text,
    content_type text,
    size_bytes int8,
    uploaded_by uuid,
    uploaded_at timestamptz,
    is_deleted bool,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    delete_reason text,
    restore_reason text,
    restored_at timestamptz,
    restored_by uuid,
    deletion_scheduled_at timestamptz,
    permanent_deletion_date date,
    deletion_count int4,
    file_version int4,
    previous_version_id uuid,
    is_archived bool,
    archived_at timestamptz,
    archived_by uuid,
    archive_location text,
    checksum text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid
);

CREATE TABLE IF NOT EXISTS shield.grievance_complaints (
    id uuid,
    org_id uuid,
    complaint_id text,
    complaint_type complaint_type,
    description text,
    complaint_date date,
    complainant_id uuid,
    respondent_id uuid,
    status complaint_status,
    assigned_to uuid,
    resolution_description text,
    resolution_date date,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS shield.log_history (
    id uuid,
    org_id uuid,
    schema_name text,
    table_name text,
    record_id uuid,
    operation text,
    changed_by text,
    changed_by_id uuid,
    changed_at timestamptz,
    old_data jsonb,
    new_data jsonb,
    comment text,
    metadata jsonb,
    changed_fields _text,
    ip_address inet,
    user_agent text,
    session_id text,
    request_id text
);

CREATE TABLE IF NOT EXISTS shield.medical_examinations (
    id uuid,
    org_id uuid,
    employee_id uuid,
    examination_type text,
    examination_date date,
    medical_center text,
    doctor_name text,
    fitness_status text,
    restrictions text,
    valid_until date,
    certificate_file_id uuid,
    remarks text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS shield.posh_complaints (
    id uuid,
    org_id uuid,
    complaint_id text,
    complaint_type complaint_type,
    description text,
    complaint_date date,
    complainant_id uuid,
    complainant_name text,
    respondent_id uuid,
    respondent_name text,
    location_geo text,
    supporting_file_id uuid,
    confidentiality_requested bool,
    status complaint_status,
    assigned_to uuid,
    assigned_committee_id uuid,
    investigation_start date,
    investigation_end date,
    resolution_description text,
    resolution_date date,
    action_taken text,
    followup_required bool,
    followup_date date,
    escalation_level text,
    action_taken_by uuid,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS shield.ppe_issued (
    id uuid,
    org_id uuid,
    employee_id uuid,
    ppe_type text,
    ppe_description text,
    quantity int4,
    issue_date date,
    expected_return_date date,
    issued_by uuid,
    acknowledgement_file_id uuid,
    status text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS shield.ppe_returned (
    id uuid,
    org_id uuid,
    ppe_issued_id uuid,
    return_date date,
    quantity_returned int4,
    condition text,
    returned_to uuid,
    remarks text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid
);

CREATE TABLE IF NOT EXISTS shield.safety_incidents (
    id uuid,
    org_id uuid,
    incident_id text,
    incident_date timestamptz,
    location text,
    location_gps text,
    severity incident_severity,
    description text,
    injuries_reported bool,
    injured_persons jsonb,
    immediate_action_taken text,
    investigation_required bool,
    investigation_file_id uuid,
    preventive_measures text,
    status text,
    reported_by uuid,
    assigned_to uuid,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS staffie.attendance_logs (
    id uuid,
    org_id uuid,
    employee_id uuid,
    attendance_date date,
    check_in_time timestamptz,
    check_out_time timestamptz,
    status attendance_status,
    working_hours numeric,
    overtime_hours numeric,
    location_gps text,
    device_info jsonb,
    remarks text,
    approved_by uuid,
    approved_at timestamptz,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid
);

CREATE TABLE IF NOT EXISTS staffie.contracts (
    id uuid,
    org_id uuid,
    employee_id uuid,
    contract_number text,
    contract_type contract_type,
    start_date date,
    end_date date,
    auto_renew bool,
    contract_value numeric,
    payment_terms text,
    terms_and_conditions text,
    contract_file_id uuid,
    status text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS staffie.employees (
    id uuid,
    org_id uuid,
    employee_code text,
    person_id uuid,
    full_name text,
    common_name text,
    father_name text,
    marital_status marital_status,
    gender gender,
    disability_status bool,
    nationality text,
    blood_group text,
    date_of_birth date,
    photo_file_id uuid,
    address text,
    city text,
    district text,
    state text,
    country text,
    country_code int4,
    email text,
    mobile text,
    home_gps_location text,
    mobile_verified bool,
    email_verified bool,
    address_verified bool,
    emergency_contact_verified bool,
    emergency_contact_name text,
    emergency_contact_number text,
    emergency_address text,
    contact_gps text,
    user_id uuid,
    user_name text,
    user_department text,
    user_email text,
    user_entry_time timestamptz,
    date_of_joining date,
    agreement_date date,
    employment_status employment_status,
    probation_period_months int4,
    notice_period_days int4,
    bank_account_id uuid,
    pf_number text,
    uan_number text,
    esi_number text,
    is_young_worker bool,
    medical_fitness_certificate_id uuid,
    tags _text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS staffie.employment_records (
    id uuid,
    org_id uuid,
    employee_id uuid,
    employee_type contract_type,
    designation text,
    division text,
    department text,
    joining_date date,
    agreement_date date,
    employment_letter_date date,
    leaving_date date,
    age_at_joining int4,
    gross_salary numeric,
    payment_frequency payment_frequency,
    offer_letter_file_id uuid,
    employment_letter_file_id uuid,
    cv_file_id uuid,
    initials_assigned text,
    is_current bool,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS staffie.expense_claim_items (
    id uuid,
    claim_id uuid,
    line_number int4,
    expense_date date,
    category text,
    description text,
    supplier_name text,
    supplier_gstin text,
    invoice_number text,
    taxable_amount numeric,
    gst_rate_percent numeric,
    gst_type gst_type,
    cgst_amount numeric,
    sgst_amount numeric,
    igst_amount numeric,
    tds_applicable bool,
    tds_section tds_section,
    tds_amount numeric,
    total_line_amount numeric,
    hsn_sac_id uuid,
    attachments jsonb,
    reimbursable bool,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS staffie.expense_claims (
    id uuid,
    org_id uuid,
    claim_number text,
    claimant_id uuid,
    employee_id uuid,
    entity_id uuid,
    claim_date date,
    total_taxable_amount numeric,
    total_gst_amount numeric,
    total_tds_amount numeric,
    total_amount numeric,
    net_payable_amount numeric,
    reimbursement_type text,
    payment_account_id uuid,
    status text,
    submitted_at timestamptz,
    approved_at timestamptz,
    approved_by uuid,
    paid_at timestamptz,
    payment_reference text,
    policy_violations jsonb,
    notes text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS staffie.files (
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    file_type text,
    file_name text,
    storage_path text,
    content_type text,
    size_bytes int8,
    uploaded_by uuid,
    uploaded_at timestamptz,
    is_deleted bool,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    delete_reason text,
    restore_reason text,
    restored_at timestamptz,
    restored_by uuid,
    deletion_scheduled_at timestamptz,
    permanent_deletion_date date,
    deletion_count int4,
    file_version int4,
    previous_version_id uuid,
    is_archived bool,
    archived_at timestamptz,
    archived_by uuid,
    archive_location text,
    checksum text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid
);

CREATE TABLE IF NOT EXISTS staffie.log_history (
    id uuid,
    org_id uuid,
    schema_name text,
    table_name text,
    record_id uuid,
    operation text,
    changed_by text,
    changed_by_id uuid,
    changed_at timestamptz,
    old_data jsonb,
    new_data jsonb,
    comment text,
    metadata jsonb,
    changed_fields _text,
    ip_address inet,
    user_agent text,
    session_id text,
    request_id text
);

CREATE TABLE IF NOT EXISTS staffie.module_role_assignments (
    id uuid,
    role_id uuid,
    person_id uuid,
    team_id uuid,
    scope jsonb,
    active bool,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS staffie.module_roles (
    id uuid,
    org_id uuid,
    role_code text,
    display_name text,
    description text,
    permissions jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS staffie.module_team_members (
    id uuid,
    team_id uuid,
    person_id uuid,
    role_code text,
    is_primary bool,
    joined_at timestamptz,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS staffie.module_teams (
    id uuid,
    org_id uuid,
    name text,
    parent_team_id uuid,
    lead_person_id uuid,
    description text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS staffie.module_users (
    id uuid,
    org_id uuid,
    person_id uuid,
    module_role text,
    designation text,
    permissions jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS survey.files (
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    file_type text,
    file_name text,
    storage_path text,
    content_type text,
    size_bytes int8,
    uploaded_by uuid,
    uploaded_at timestamptz,
    is_deleted bool,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    delete_reason text,
    restore_reason text,
    restored_at timestamptz,
    restored_by uuid,
    deletion_scheduled_at timestamptz,
    permanent_deletion_date date,
    deletion_count int4,
    file_version int4,
    previous_version_id uuid,
    is_archived bool,
    archived_at timestamptz,
    archived_by uuid,
    archive_location text,
    checksum text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid
);

CREATE TABLE IF NOT EXISTS survey.log_history (
    id uuid,
    org_id uuid,
    schema_name text,
    table_name text,
    record_id uuid,
    operation text,
    changed_by text,
    changed_by_id uuid,
    changed_at timestamptz,
    old_data jsonb,
    new_data jsonb,
    comment text,
    metadata jsonb,
    changed_fields _text,
    ip_address inet,
    user_agent text,
    session_id text,
    request_id text
);

CREATE TABLE IF NOT EXISTS survey.module_role_assignments (
    id uuid,
    org_id uuid,
    role_id uuid,
    person_id uuid,
    team_id uuid,
    scope jsonb,
    active bool,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS survey.module_team_members (
    id uuid,
    org_id uuid,
    team_id uuid,
    person_id uuid,
    role_code text,
    is_primary bool,
    joined_at timestamptz,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS survey.survey_pulse (
    id uuid,
    org_id uuid,
    frequency text,
    next_run timestamptz,
    target_groups jsonb,
    metadata jsonb,
    created_at timestamptz,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS survey.survey_questions (
    id uuid,
    survey_id uuid,
    q_text text,
    q_type survey_qtype_enum,
    options jsonb,
    mandatory bool,
    created_at timestamptz,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS survey.survey_responses (
    id uuid,
    survey_id uuid,
    respondent_id uuid,
    submitted_at timestamptz,
    answers jsonb,
    score numeric,
    metadata jsonb,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS survey.surveys (
    id uuid,
    org_id uuid,
    title text,
    description text,
    survey_type text,
    is_active bool,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid
);

CREATE TABLE IF NOT EXISTS taxforge.files (
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    file_type text,
    file_name text,
    storage_path text,
    content_type text,
    size_bytes int8,
    uploaded_by uuid,
    uploaded_at timestamptz,
    is_deleted bool,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    delete_reason text,
    restore_reason text,
    restored_at timestamptz,
    restored_by uuid,
    deletion_scheduled_at timestamptz,
    permanent_deletion_date date,
    deletion_count int4,
    file_version int4,
    previous_version_id uuid,
    is_archived bool,
    archived_at timestamptz,
    archived_by uuid,
    archive_location text,
    checksum text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid
);

CREATE TABLE IF NOT EXISTS taxforge.gst_details (
    id uuid,
    org_id uuid,
    party_type text,
    party_id uuid,
    gstin text,
    legal_name text,
    trade_name text,
    gst_state text,
    registration_type text,
    is_default bool,
    status text,
    effective_from date,
    effective_to date,
    filing_frequency text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS taxforge.gst_transactions (
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    gst_detail_id uuid,
    transaction_date date,
    taxable_amount numeric,
    gst_rate_percent numeric,
    gst_type gst_type,
    cgst_amount numeric,
    sgst_amount numeric,
    igst_amount numeric,
    cess_amount numeric,
    total_gst_amount numeric,
    itc_eligible bool,
    itc_claimed bool,
    invoice_date date,
    filing_period text,
    document_ref text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS taxforge.hsn_sac_codes (
    id uuid,
    code text,
    type text,
    description text,
    default_gst_rate numeric,
    default_gst_type gst_type,
    unit_of_measure text,
    is_exempt bool,
    itc_eligible bool,
    accounting_code text,
    effective_from date,
    effective_to date,
    is_active bool,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS taxforge.log_history (
    id uuid,
    org_id uuid,
    schema_name text,
    table_name text,
    record_id uuid,
    operation text,
    changed_by text,
    changed_by_id uuid,
    changed_at timestamptz,
    old_data jsonb,
    new_data jsonb,
    comment text,
    metadata jsonb,
    changed_fields _text,
    ip_address inet,
    user_agent text,
    session_id text,
    request_id text
);

CREATE TABLE IF NOT EXISTS taxforge.tds_details (
    id uuid,
    org_id uuid,
    party_type text,
    party_id uuid,
    section_code tds_section,
    tds_rate_percent numeric,
    threshold_amount numeric,
    pan text,
    pan_validated bool,
    exemption_certificate text,
    effective_from date,
    effective_to date,
    is_active bool,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS taxforge.tds_transactions (
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    tds_detail_id uuid,
    transaction_date date,
    base_amount numeric,
    tds_rate_percent numeric,
    tds_amount numeric,
    deposited_date date,
    challan_no text,
    deducted_by uuid,
    itc_applicability bool,
    acknowledgement_number text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS training.assessment_attempts (
    id uuid,
    assessment_id uuid,
    employee_id uuid,
    attempt_date timestamptz,
    score numeric,
    responses jsonb,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS training.assessment_questions (
    id uuid,
    assessment_id uuid,
    q_type text,
    question text,
    options jsonb,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS training.assessments (
    id uuid,
    course_id uuid,
    type assess_type_enum,
    passing_score numeric,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS training.certifications (
    id uuid,
    employee_id uuid,
    course_id uuid,
    certificate_no text,
    issue_date date,
    expiry_date date,
    file_id uuid,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS training.course_units (
    id uuid,
    course_id uuid,
    title text,
    content_ref_id uuid,
    sequence int4,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS training.courses (
    id uuid,
    org_id uuid,
    code text,
    title text,
    description text,
    duration_hours numeric,
    level training_level_enum,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS training.enrollments (
    id uuid,
    session_id uuid,
    employee_id uuid,
    status enrollment_status_enum,
    score numeric,
    completed_at timestamptz,
    feedback text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS training.files (
    id uuid,
    org_id uuid,
    reference_table text,
    reference_id uuid,
    file_type text,
    file_name text,
    storage_path text,
    content_type text,
    size_bytes int8,
    uploaded_by uuid,
    uploaded_at timestamptz,
    is_deleted bool,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    delete_reason text,
    restore_reason text,
    restored_at timestamptz,
    restored_by uuid,
    deletion_scheduled_at timestamptz,
    permanent_deletion_date date,
    deletion_count int4,
    file_version int4,
    previous_version_id uuid,
    is_archived bool,
    archived_at timestamptz,
    archived_by uuid,
    archive_location text,
    checksum text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid
);

CREATE TABLE IF NOT EXISTS training.lms_settings (
    id uuid,
    org_id uuid,
    rules jsonb,
    reassign_policy text,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS training.log_history (
    id uuid,
    org_id uuid,
    schema_name text,
    table_name text,
    record_id uuid,
    operation text,
    changed_by text,
    changed_by_id uuid,
    changed_at timestamptz,
    old_data jsonb,
    new_data jsonb,
    comment text,
    metadata jsonb,
    changed_fields _text,
    ip_address inet,
    user_agent text,
    session_id text,
    request_id text
);

CREATE TABLE IF NOT EXISTS training.module_role_assignments (
    id uuid,
    org_id uuid,
    role_id uuid,
    person_id uuid,
    team_id uuid,
    scope jsonb,
    active bool,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS training.module_team_members (
    id uuid,
    org_id uuid,
    team_id uuid,
    person_id uuid,
    role_code text,
    is_primary bool,
    joined_at timestamptz,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS training.sessions (
    id uuid,
    course_id uuid,
    session_date_start timestamptz,
    session_date_end timestamptz,
    instructor_id uuid,
    location text,
    max_seats int4,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

CREATE TABLE IF NOT EXISTS training.training_materials (
    id uuid,
    course_id uuid,
    file_id uuid,
    material_type course_material_type,
    metadata jsonb,
    created_at timestamptz,
    created_by uuid,
    org_id uuid,
    updated_at timestamptz,
    updated_by uuid,
    approved_at timestamptz,
    approved_by uuid,
    deleted_at timestamptz,
    deleted_by uuid,
    delete_type text,
    is_deleted bool
);

